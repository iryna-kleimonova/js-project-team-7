{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/feedback.js","../src/js/menu.js","../src/js/artists.js"],"sourcesContent":["//Обʼєкти з посиланнями на ДОМ елементи\r\nexport const refs = {\r\n  // Header & Navigation\r\n  burger: document.querySelector('.js-burger'),\r\n  closeBtn: document.querySelector('.js-close'),\r\n  navList: document.querySelector('.js-nav-list'),\r\n  navLinks: document.querySelectorAll('.nav-button'),\r\n  header: document.querySelector('.header'),\r\n\r\n  // Hero section\r\n  heroSection: document.querySelector('.js-hero'),\r\n  getStartedBtn: document.querySelector('.js-hero-button'),\r\n\r\n  // Artists list\r\n  artistCardsContainer: document.querySelector('.js-artist-list'),\r\n  artistCards: document.querySelectorAll('.js-artist-card'),\r\n  loadMoreBtn: document.querySelector('.load-more-btn'),\r\n\r\n  // About Artist Modal\r\n  modal: document.querySelector('.js-modal'),\r\n  modalCloseBtn: document.querySelector('.js-modal-close'),\r\n  modalContent: document.querySelector('.js-modal-content'),\r\n  modalFilters: document.querySelector('.js-modal-filters'),\r\n\r\n  // About section\r\n  aboutSection: document.querySelector('.js-about'),\r\n  aboutImage: document.querySelector('.js-about-image'),\r\n  aboutText: document.querySelector('.js-about-text'),\r\n\r\n  // Feedback\r\n  testimonialsSection: document.querySelector('.js-testimonials'),\r\n  testimonialsSlider: document.querySelector('.js-testimonials-slider'),\r\n  testimonialPrevBtn: document.querySelector('.js-testimonials-btn-prev'),\r\n  testimonialNextBtn: document.querySelector('.js-testimonials-btn-next'),\r\n\r\n  // Footer\r\n  footer: document.querySelector('.js-footer'),\r\n};\r\n","import axios from 'axios';\nimport Swiper from 'swiper';\nimport { Navigation, Pagination } from 'swiper/modules';\nimport 'swiper/css';\nimport 'swiper/css/navigation';\nimport 'swiper/css/pagination';\n// import 'css-star-rating/css/star-rating.min.css';\n\nconst swiper = new Swiper('.feedback-swiper', {\n  modules: [Navigation, Pagination],\n  slidesPerView: 1,\n  spaceBetween: 3,\n  loop: true,\n  pagination: { el: '.swiper-pagination', clickable: true },\n  navigation: {\n    nextEl: '.swiper-button-next',\n    prevEl: '.swiper-button-prev',\n  },\n\n  breakpoints: {\n    0: { slidesPerView: 1 },\n    768: { slidesPerView: 1 },\n    1024: { slidesPerView: 1 },\n  },\n});\n\naxios.defaults.baseURL = 'https://sound-wave.b.goit.study/api/';\n\n// async function fetchFeedbacks() {\n//   try {\n//     const response = await axios.get('/feedbacks?limit=3&page=1');\n//     const feedbacks = response.data.data;\n\n//     const container = document.getElementById('feedbacks-container');\n//     container.innerHTML = '';\n\n//     if (!Array.isArray(feedbacks)) {\n//       return;\n//     }\n\n//     feedbacks.forEach(fb => {\n//       const slide = document.createElement('div');\n//       slide.classList.add('swiper-slide');\n//       const roundedRating = Math.round(fb.rating);\n\n//       slide.innerHTML = `\n//           <div class=\"feedback-card\">\n//             <div class=\"rating\" data-stars=\"${roundedRating}\"></div>\n//             <p class=\"feedback-text\">\"${fb.descr}\"</p>\n//             <p class=\"author-name\">${fb.name}</p>\n//           </div>\n//         `;\n\n//       const ratingEl = createRatingElement(roundedRating);\n//       slide.querySelector('.rating').appendChild(ratingEl);\n\n//       container.appendChild(slide);\n//     });\n\n//     updateStars();\n//     swiper.update();\n//   } catch (error) {\n//     console.error('Error receving feedback:', error);\n//   }\n// }\n\n// function createRatingElement(roundedRating) {\n//   const select = document.createElement('select');\n//   select.classList.add('rating', 'rating--sm');\n//   select.setAttribute('data-readonly', '');\n\n//   for (let i = 1; i <= 5; i++) {\n//     const option = document.createElement('option');\n//     option.value = i;\n//     option.textContent = i;\n//     if (i === roundedRating) option.selected = true;\n//     select.appendChild(option);\n//   }\n//   return select;\n// }\n\n// function updateStars() {\n//   const ratings = document.querySelectorAll('.rating');\n//   ratings.forEach(el => {\n//     const stars = +el.dataset.stars || 0;\n//     el.classList.add('rating', 'rating--read-only', 'rating--md');\n//     el.setAttribute('data-rating', stars);\n//   });\n// }\n\nasync function fetchFeedbacks() {\n  try {\n    const { data } = await axios.get('/feedbacks?limit=3&page=1');\n    const feedbacks = data.data;\n    console.log('Отримані фідбеки:', feedbacks);\n    const container = document.getElementById('feedbacks-container');\n    container.innerHTML = '';\n\n    feedbacks.forEach((fb, i) => {\n      const slide = document.createElement('div');\n      slide.classList.add('swiper-slide');\n\n      const ratingId = `raty-${i}`;\n      slide.innerHTML = `\n        <div class=\"feedback-card\">\n          <div class=\"rating-star\" id=\"${ratingId}\"></div>\n          <p class=\"feedback-text\">\"${fb.descr}\"</p>\n          <p class=\"author-name\">${fb.name}</p>\n        </div>\n      `;\n      container.appendChild(slide);\n      initializeRaty(`#${ratingId}`, fb.rating);\n    });\n\n    swiper.update();\n  } catch (error) {\n    console.error('Error fetching feedbacks:', error);\n  }\n}\n\nfunction smartRoundScore(rating) {\n  const decimal = rating % 1;\n\n  if (decimal === 0.5) {\n    return rating; // залишаємо половинку\n  }\n\n  return Math.round(rating); // звичайне округлення\n}\n\nfunction initializeRaty(selector, rating) {\n  $(selector).raty({\n    readOnly: true,\n    score: smartRoundScore(rating),\n    half: true,\n    starOn: '/images/star-on.svg',\n    starOff: '/images/star-off.svg',\n    starHalf: '/images/star-half.svg',\n  });\n}\n\nfetchFeedbacks();\n","const burger = document.querySelector('.js-burger');\nconst closeBtn = document.querySelector('.js-close');\nconst navList = document.querySelector('.js-nav-list');\nconst navLinks = document.querySelectorAll('.nav-button');\nconst header = document.querySelector('.header');\n\n// Відкриття бургер-меню\nburger.addEventListener('click', () => {\n  navList.classList.add('is-open');\n});\n\n// Закриття бургер-меню по хрестику\ncloseBtn.addEventListener('click', () => {\n  navList.classList.remove('is-open');\n});\n\n// Плавний перехід та закриття при кліку на пункт меню\nnavLinks.forEach(link => {\n  link.addEventListener('click', e => {\n    e.preventDefault();\n    const targetId = link.getAttribute('href').substring(1);\n    const targetEl = document.getElementById(targetId);\n    if (targetEl) {\n      const headerHeight = header.offsetHeight;\n      const offsetTop = targetEl.getBoundingClientRect().top + window.pageYOffset - headerHeight;\n      window.scrollTo({\n        top: offsetTop,\n        behavior: 'smooth'\n      });\n      navList.classList.remove('is-open');\n    }\n  });\n});\n","// import { fetchArtists, fetchArtistById, fetchArtistsAlbumsById } from './api-service.js';\n// import { openArtistModal } from './modal.js';\n// import { renderArtists } from './render-function.js';\nimport { refs } from './refs.js';\n\nlet currentPage = 1;\nconst limit = 8;\nlet totalPages = null;\n\nasync function loadArtists() {\n  try {\n    const data = await fetchArtists(currentPage, limit);\n    renderArtists(data);\n    totalPages = Math.ceil(data.total / limit);\n\n    if (currentPage >= totalPages) {\n      refs.loadMoreBtn.style.display = 'none';\n    }\n  } catch (error) {\n    console.error('Failed to load artists:', error);\n  }\n}\n\nrefs.loadMoreBtn.addEventListener('click', () => {\n  currentPage++;\n  loadArtists().catch(error => {\n    console.error('Failed to load more artists:', error);\n  });\n});\n\nrefs.artistCardsContainer.addEventListener('click', async e => {\n  const button = e.target.closest('.artist-card-btn');\n  if (!button) return;\n\n  const card = button.closest('.artist-card');\n  const artistId = card?.dataset?.id;\n\n  if (!artistId) {\n    console.warn('ID не знайдено для картки артиста');\n    return;\n  }\n\n  try {\n    const artistData = await fetchArtistById(artistId);\n    const albumsData = await fetchArtistsAlbumsById(artistId);\n\n    console.log('Дані для модального вікна:', artistData, albumsData);\n\n    openArtistModal({ artist: artistData, albums: albumsData });\n  } catch (error) {\n    console.error('Failed to open artist modal:', error);\n  }\n});\n\nloadArtists();\n"],"names":["refs","swiper","Swiper","Navigation","Pagination","axios","fetchFeedbacks","data","feedbacks","container","fb","i","slide","ratingId","initializeRaty","error","smartRoundScore","rating","selector","burger","closeBtn","navList","navLinks","header","link","e","targetId","targetEl","headerHeight","offsetTop","currentPage","limit","totalPages","loadArtists","button","card","artistId","_a","artistData","albumsData"],"mappings":"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"}